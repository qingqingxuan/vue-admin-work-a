var $=Object.defineProperty,j=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var T=(e,a,u)=>a in e?$(e,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[a]=u,x=(e,a)=>{for(var u in a||(a={}))z.call(a,u)&&T(e,u,a[u]);if(K)for(var u of K(a))H.call(a,u)&&T(e,u,a[u]);return e},L=(e,a)=>j(e,q(a));import{_ as G,p as O,y as J,z as V,r as P,e as Q,f as W,v as X}from"./index.b5a687fa.js";import{b as c,m as F,d as Y,au as Z,e as ee,o as p,p as M,a as s,w as r,F as U,I as y,H as oe,s as h,c as k,a4 as ae,q as ue,ak as ne,M as te,P as le,aS as se,bh as re,as as de,bp as ie,aH as ce,aG as pe,dH as me}from"./vendor.a1e22204.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               */import{u as _e,a as fe,c as ve}from"./table.89c097ae.js";const N="ROLE_",C=[{label:"\u89D2\u8272\u540D\u79F0",type:"input",key:"name",value:c(""),required:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",validator:function(){return this.value.value?!0:(F.error(this.placeholder),!1)}},{label:"\u89D2\u8272\u7F16\u53F7",key:"roleCode",value:c(""),type:"input",required:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7",validator:function(){return this.value.value?!0:(F.error(this.placeholder),!1)}},{label:"\u89D2\u8272\u63CF\u8FF0",key:"description",value:c(""),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"}];function S(e,a,u){const _=[];return e.forEach(d=>{const l={};l.key=d.menuUrl,l.title=d.menuName,a.push(l.key),d.children&&(u.push(l.key),l.children=S(d.children,a,u)),_.push(l)}),_}const Fe=Y({name:"Role",setup(){const e=c(null),a=c(null),u=_e(),_=ve("id"),d=c("\u6DFB\u52A0\u89D2\u8272"),l=Z([]),D=fe([u.indexColumn,{title:"\u89D2\u8272\u540D\u79F0",key:"name",dataIndex:"name"},{title:"\u89D2\u8272\u7F16\u53F7",key:"roleCode",dataIndex:"roleCode"},{title:"\u89D2\u8272\u63CF\u8FF0",key:"description",dataIndex:"description"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime",dataIndex:"createTime"},{title:"\u89D2\u8272\u7F16\u53F7",key:"roleCode",dataIndex:"roleCode"},{title:"\u64CD\u4F5C",key:"actions"}],{align:"center"}),f=c([]),m=c([]);function g(){O({url:J,data:{}}).then(u.handleSuccess).catch(console.log)}function b(){var n;d.value="\u6DFB\u52A0\u89D2\u8272",(n=e.value)==null||n.toggle()}function A(n){var t;d.value="\u7F16\u8F91\u89D2\u8272",(t=e.value)==null||t.toggle(),ne(()=>{C.forEach(o=>{const i=o.key,v=n[i];v&&(o.key==="roleCode"?o.value.value=v.replace(N,""):o.value.value=v)})})}function I(n){te.confirm({title:"\u63D0\u793A",content:"\u662F\u5426\u8981\u5220\u9664\u6B64\u89D2\u8272\uFF1F",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",onOk:()=>{F.success("\u6A21\u62DF\u89D2\u8272\u5220\u9664\u6210\u529F\uFF0C\u53C2\u6570\u4E3A"+JSON.stringify(n))}})}function B(){var n;C.every(t=>t.validator?t.validator():!0)&&((n=e.value)==null||n.toggle(),F.success("\u6A21\u62DF\u83DC\u5355\u6DFB\u52A0\u6210\u529F\uFF0C\u53C2\u6570\u4E3A\uFF1A"+JSON.stringify(C.reduce((t,o)=>(t[o.key]=o.value.value,t),{}))))}function R(n){O({url:V,data:{roleId:n.id}}).then(t=>{var o;l.length=0,l.push(...S(t.data,f.value,m.value)),(o=a.value)==null||o.toggle()}).catch(console.log)}function E(){var n;(n=a.value)==null||n.close(),F.success("\u63D0\u4EA4\u6210\u529F: "+JSON.stringify(f.value))}return ee(g),L(x({ROLE_CODE_FLAG:N,modalDialogRef:e,menuModalDialogRef:a,rowKey:_,menuData:l,tableColumns:D,formItems:C,actionTitle:d,defaultCheckedKeys:f,defaultExpandedKeys:m},u),{onAddItem:b,onDataFormConfirm:B,onShowMenu:R,onDeleteItem:I,onUpdateItem:A,onMenuConfirm:E})}}),ye={class:"main-container"},he=y("\u7F16\u8F91"),ke=y("\u5220\u9664"),Ce=y(" \u83DC\u5355\u6743\u9650 ");function De(e,a,u,_,d,l){const D=P,f=Q,m=le,g=se,b=re,A=W,I=de,B=ie,R=ce,E=pe,n=X,t=me;return p(),M("div",ye,[s(f,{"show-filter":!1},{"top-right":r(()=>[s(D,{onAdd:e.onAddItem},null,8,["onAdd"])]),_:1}),s(A,null,{default:r(()=>[s(b,{loading:e.tableLoading,"data-source":e.dataList,columns:e.tableColumns,pagination:!1,"row-key":e.rowKey},{bodyCell:r(({column:o,record:i,index:v})=>[o.key==="index"?(p(),M(U,{key:0},[y(oe(v+1),1)],2112)):h("v-if",!0),o.key==="actions"?(p(),k(g,{key:1},{default:r(()=>[s(m,{ghost:"",type:"primary",onClick:w=>e.onUpdateItem(i),size:"small"},{default:r(()=>[he]),_:2},1032,["onClick"]),s(m,{danger:"",size:"small",onClick:w=>e.onDeleteItem(i)},{default:r(()=>[ke]),_:2},1032,["onClick"]),s(m,{ghost:"",type:"primary",size:"small",onClick:w=>e.onShowMenu(i)},{default:r(()=>[Ce]),_:2},1032,["onClick"])]),_:2},1024)):h("v-if",!0)]),_:1},8,["loading","data-source","columns","row-key"])]),_:1}),s(n,{ref:"modalDialogRef",title:e.actionTitle,onConfirm:e.onDataFormConfirm},{content:r(()=>[s(E,null,{default:r(()=>[(p(!0),M(U,null,ae(e.formItems,o=>(p(),k(R,{class:ue([o.required?"form-item__require":"form-item__no_require"]),label:o.label,key:o.key},{default:r(()=>[o.type==="input"?(p(),k(I,{key:0,"addon-before":o.key==="roleCode"?e.ROLE_CODE_FLAG:"",placeholder:o.placeholder,value:o.value.value,"onUpdate:value":i=>o.value.value=i},null,8,["addon-before","placeholder","value","onUpdate:value"])):h("v-if",!0),o.type==="textarea"?(p(),k(B,{key:1,value:o.value.value,"onUpdate:value":i=>o.value.value=i,placeholder:o.placeholder,"auto-size":{minRows:3,maxRows:5}},null,8,["value","onUpdate:value","placeholder"])):h("v-if",!0)]),_:2},1032,["class","label"]))),128))]),_:1})]),_:1},8,["title","onConfirm"]),s(n,{ref:"menuModalDialogRef",title:"\u7F16\u8F91\u83DC\u5355\u6743\u9650",onConfirm:e.onMenuConfirm},{content:r(()=>[s(t,{"tree-data":e.menuData,checkable:"",expandedKeys:e.defaultExpandedKeys,"onUpdate:expandedKeys":a[0]||(a[0]=o=>e.defaultExpandedKeys=o),checkedKeys:e.defaultCheckedKeys,"onUpdate:checkedKeys":a[1]||(a[1]=o=>e.defaultCheckedKeys=o)},null,8,["tree-data","expandedKeys","checkedKeys"])]),_:1},8,["onConfirm"])])}var we=G(Fe,[["render",De]]);export{we as default};
