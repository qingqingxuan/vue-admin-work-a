var S=Object.defineProperty,w=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var M=(e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))H.call(t,n)&&M(e,n,t[n]);if(y)for(var n of y(t))V.call(t,n)&&M(e,n,t[n]);return e},L=(e,t)=>w(e,G(t));import{p as z,_ as J,q as K,r as Q,e as W,f as X,v as Y}from"./index.b5a687fa.js";import{d as Z,v as x,b as B,e as ee,o as _,p as j,a,w as u,c as A,I as m,H as $,s as T,F as te,a4 as ne,M as oe,m as U,bg as ae,P as ue,aS as se,bh as le,bq as de,ar as re,aH as ie,as as me,aq as pe,bm as _e,bn as ce,aG as fe}from"./vendor.a1e22204.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               */import{u as Fe,a as Ee}from"./table.89c097ae.js";import{_ as O}from"./lodash.edcff975.js";function ve(){return z}const ge="dp_code_",be=Z({name:"Department",setup(){const e=Fe(),t=Ee([{title:"\u90E8\u95E8\u540D\u79F0",key:"name",dataIndex:"name",align:"center"},{title:"\u90E8\u95E8\u7F16\u53F7",key:"depCode",dataIndex:"depCode",align:"center"},{title:"\u6392\u5E8F",key:"order",dataIndex:"order",align:"center"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",align:"center"},{title:"\u64CD\u4F5C",key:"actions",dataIndex:"actions",align:"center"}]),n=x({parentId:void 0,id:0,name:"",depCode:"",order:1,status:1}),I={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 10\u4E2A\u5B57\u7B26",trigger:"blur"}],depCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 30\u4E2A\u5B57\u7B26",trigger:"blur"}]},F=B(),c=B(),r=B(null),E=ve();function v(){E({url:K}).then(({data:o=[]})=>(e.tableLoading.value=!1,e.dataList.length=0,e.dataList.push(...o),o))}function p(o,s){for(let d=0;d<o.length;d++){const i=o[d];if(i.id===s.id){if(!O.isEmpty(i.children)){U.error("\u5F53\u524D\u90E8\u95E8\u4E0B\u6709\u5B50\u90E8\u95E8\uFF0C\u4E0D\u80FD\u5220\u9664");return}o.splice(d,1);return}else O.isEmpty(i.children)||p(i.children,s)}}const g=o=>{oe.confirm({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u4FE1\u606F\uFF0C\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF1F",onOk(){p(e.dataList,o)}})};function b(){var o;c.value="\u6DFB\u52A0\u90E8\u95E8",n.parentId=void 0,n.id=0,n.status=1,n.depCode="",n.name="",n.order=1,(o=r.value)==null||o.toggle()}function C(){var o;(o=F.value)==null||o.validate().then(()=>{var s;(s=r.value)==null||s.close(),U.success("\u6A21\u62DF\u90E8\u95E8\u6DFB\u52A0/\u7F16\u8F91\u6210\u529F\uFF0C\u6570\u636E\u4E3A\uFF1A"+JSON.stringify(n))}).catch(s=>{console.log("error",s)})}function D(o){var s;c.value="\u7F16\u8F91\u90E8\u95E8",Object.keys(o).forEach(d=>{n[d]=o[d]}),n.parentId=o.parentId,(s=r.value)==null||s.toggle()}return ee(v),L(h({DP_CODE_FLAG:ge,formRef:F,dialogTitle:c,departmentModel:n,formRule:I},e),{tableColumns:t,onUpdateItem:D,onDataFormConfirm:C,onDeleteItem:g,onAddItem:b,modalDialog:r})}}),Ce={class:"main-container"},De=m(" \u7F16\u8F91 "),Be=m(" \u5220\u9664 "),Ae=m("\u6B63\u5E38"),Ie=m("\u7981\u7528");function ke(e,t,n,I,F,c){const r=Q,E=W,v=ae,p=ue,g=se,b=le,C=X,D=de,o=re,s=ie,d=me,i=pe,k=_e,R=ce,q=fe,N=Y;return _(),j("div",Ce,[a(E,{"show-filter":!1},{"top-right":u(()=>[a(r,{onAdd:e.onAddItem},null,8,["onAdd"])]),_:1}),a(C,null,{default:u(()=>[a(b,{loading:e.tableLoading,"data-source":e.dataList,columns:e.tableColumns,pagination:!1},{bodyCell:u(({column:l,record:f})=>[l.key==="status"?(_(),A(v,{key:0,color:f.status===1?"success":"error"},{default:u(()=>[m($(f.status===1?"\u6B63\u5E38":"\u7981\u7528"),1)]),_:2},1032,["color"])):T("v-if",!0),l.key==="actions"?(_(),A(g,{key:1},{default:u(()=>[a(p,{type:"primary",size:"small",onClick:P=>e.onUpdateItem(f)},{default:u(()=>[De]),_:2},1032,["onClick"]),a(p,{danger:"",size:"small",onClick:P=>e.onDeleteItem(f)},{default:u(()=>[Be]),_:2},1032,["onClick"])]),_:2},1024)):T("v-if",!0)]),_:1},8,["loading","data-source","columns"])]),_:1}),a(N,{ref:"modalDialog",title:e.dialogTitle,onConfirm:e.onDataFormConfirm},{content:u(()=>[a(q,{ref:"formRef",model:e.departmentModel,labelCol:{span:4},rules:e.formRule},{default:u(()=>[a(s,{label:"\u4E0A\u7EA7\u90E8\u95E8",name:"parentId"},{default:u(()=>[a(o,{value:e.departmentModel.parentId,"onUpdate:value":t[0]||(t[0]=l=>e.departmentModel.parentId=l),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},{default:u(()=>[(_(!0),j(te,null,ne(e.dataList,l=>(_(),A(D,{key:l.id,value:l.id},{default:u(()=>[m($(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),a(s,{label:"\u90E8\u95E8\u540D\u79F0",name:"name"},{default:u(()=>[a(d,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",value:e.departmentModel.name,"onUpdate:value":t[1]||(t[1]=l=>e.departmentModel.name=l)},null,8,["value"])]),_:1}),a(s,{label:"\u90E8\u95E8\u7F16\u53F7",name:"depCode"},{default:u(()=>[a(d,{"addon-before":e.DP_CODE_FLAG,placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",value:e.departmentModel.depCode,"onUpdate:value":t[2]||(t[2]=l=>e.departmentModel.depCode=l)},null,8,["addon-before","value"])]),_:1}),a(s,{label:"\u6392\u5E8F",name:"order"},{default:u(()=>[a(i,{value:e.departmentModel.order,"onUpdate:value":t[3]||(t[3]=l=>e.departmentModel.order=l)},null,8,["value"])]),_:1}),a(s,{label:"\u72B6\u6001",name:"status"},{default:u(()=>[a(R,{value:e.departmentModel.status,"onUpdate:value":t[4]||(t[4]=l=>e.departmentModel.status=l)},{default:u(()=>[a(k,{value:1},{default:u(()=>[Ae]),_:1}),a(k,{value:0},{default:u(()=>[Ie]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","onConfirm"])])}var Re=J(be,[["render",ke]]);export{Re as default};
