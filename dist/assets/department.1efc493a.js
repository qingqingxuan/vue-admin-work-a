var P=Object.defineProperty,z=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,h=(e,t)=>{for(var o in t||(t={}))V.call(t,o)&&M(e,o,t[o]);if(y)for(var o of y(t))G.call(t,o)&&M(e,o,t[o]);return e},j=(e,t)=>z(e,S(t));import{_ as H,a as J}from"./ModalDialog.51779dff.js";import{_ as Q,a as W}from"./TableBody.b3719953.js";import{d as K,x as X,b as B,e as Y,o as _,q as L,a,w as u,c as A,Q as m,P as T,t as $,F as Z,a7 as x,M as ee,m as U,a_ as te,W as oe,aT as ne,bq as ae,al as ue,bu as se,am as le,ak as de,bv as re,bw as ie,bz as me,bA as pe}from"./vendor.480a1782.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{p as _e,_ as ce,i as fe}from"./index.d8c8b215.js";/* empty css               */import{u as Fe,a as Ee}from"./table.c46dc0d9.js";import{_ as O}from"./lodash.9c00547a.js";function ve(){return _e}const ge="dp_code_",be=K({name:"Department",setup(){const e=Fe(),t=Ee([{title:"\u90E8\u95E8\u540D\u79F0",key:"name",dataIndex:"name",align:"center"},{title:"\u90E8\u95E8\u7F16\u53F7",key:"depCode",dataIndex:"depCode",align:"center"},{title:"\u6392\u5E8F",key:"order",dataIndex:"order",align:"center"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",align:"center"},{title:"\u64CD\u4F5C",key:"actions",dataIndex:"actions",align:"center"}]),o=X({parentId:void 0,id:0,name:"",depCode:"",order:1,status:1}),k={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 10\u4E2A\u5B57\u7B26",trigger:"blur"}],depCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 30\u4E2A\u5B57\u7B26",trigger:"blur"}]},F=B(),c=B(),r=B(null),E=ve();function v(){E({url:fe}).then(({data:n=[]})=>(e.tableLoading.value=!1,e.dataList.length=0,e.dataList.push(...n),n))}function p(n,s){for(let d=0;d<n.length;d++){const i=n[d];if(i.id===s.id){if(!O.isEmpty(i.children)){U.error("\u5F53\u524D\u90E8\u95E8\u4E0B\u6709\u5B50\u90E8\u95E8\uFF0C\u4E0D\u80FD\u5220\u9664");return}n.splice(d,1);return}else O.isEmpty(i.children)||p(i.children,s)}}const g=n=>{ee.confirm({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u4FE1\u606F\uFF0C\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF1F",onOk(){p(e.dataList,n)}})};function b(){var n;c.value="\u6DFB\u52A0\u90E8\u95E8",o.parentId=void 0,o.id=0,o.status=1,o.depCode="",o.name="",o.order=1,(n=r.value)==null||n.toggle()}function C(){var n;(n=F.value)==null||n.validate().then(()=>{var s;(s=r.value)==null||s.close(),U.success("\u6A21\u62DF\u90E8\u95E8\u6DFB\u52A0/\u7F16\u8F91\u6210\u529F\uFF0C\u6570\u636E\u4E3A\uFF1A"+JSON.stringify(o))}).catch(s=>{console.log("error",s)})}function D(n){var s;c.value="\u7F16\u8F91\u90E8\u95E8",Object.keys(n).forEach(d=>{o[d]=n[d]}),o.parentId=n.parentId,(s=r.value)==null||s.toggle()}return Y(v),j(h({DP_CODE_FLAG:ge,formRef:F,dialogTitle:c,departmentModel:o,formRule:k},e),{tableColumns:t,onUpdateItem:D,onDataFormConfirm:C,onDeleteItem:g,onAddItem:b,modalDialog:r})}}),Ce={class:"main-container"},De=m(" \u7F16\u8F91 "),Be=m(" \u5220\u9664 "),Ae=m("\u6B63\u5E38"),ke=m("\u7981\u7528");function Ie(e,t,o,k,F,c){const r=H,E=Q,v=te,p=oe,g=ne,b=ae,C=W,D=pe,n=ue,s=se,d=le,i=de,I=re,R=ie,q=me,w=J;return _(),L("div",Ce,[a(E,{"show-filter":!1},{"top-right":u(()=>[a(r,{onAdd:e.onAddItem},null,8,["onAdd"])]),_:1}),a(C,null,{default:u(()=>[a(b,{loading:e.tableLoading,"data-source":e.dataList,columns:e.tableColumns,pagination:!1},{bodyCell:u(({column:l,record:f})=>[l.key==="status"?(_(),A(v,{key:0,color:f.status===1?"success":"error"},{default:u(()=>[m(T(f.status===1?"\u6B63\u5E38":"\u7981\u7528"),1)]),_:2},1032,["color"])):$("v-if",!0),l.key==="actions"?(_(),A(g,{key:1},{default:u(()=>[a(p,{type:"primary",size:"small",onClick:N=>e.onUpdateItem(f)},{default:u(()=>[De]),_:2},1032,["onClick"]),a(p,{danger:"",size:"small",onClick:N=>e.onDeleteItem(f)},{default:u(()=>[Be]),_:2},1032,["onClick"])]),_:2},1024)):$("v-if",!0)]),_:1},8,["loading","data-source","columns"])]),_:1}),a(w,{ref:"modalDialog",title:e.dialogTitle,onConfirm:e.onDataFormConfirm},{content:u(()=>[a(q,{ref:"formRef",model:e.departmentModel,labelCol:{span:4},rules:e.formRule},{default:u(()=>[a(s,{label:"\u4E0A\u7EA7\u90E8\u95E8",name:"parentId"},{default:u(()=>[a(n,{value:e.departmentModel.parentId,"onUpdate:value":t[0]||(t[0]=l=>e.departmentModel.parentId=l),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},{default:u(()=>[(_(!0),L(Z,null,x(e.dataList,l=>(_(),A(D,{key:l.id,value:l.id},{default:u(()=>[m(T(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),a(s,{label:"\u90E8\u95E8\u540D\u79F0",name:"name"},{default:u(()=>[a(d,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",value:e.departmentModel.name,"onUpdate:value":t[1]||(t[1]=l=>e.departmentModel.name=l)},null,8,["value"])]),_:1}),a(s,{label:"\u90E8\u95E8\u7F16\u53F7",name:"depCode"},{default:u(()=>[a(d,{"addon-before":e.DP_CODE_FLAG,placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",value:e.departmentModel.depCode,"onUpdate:value":t[2]||(t[2]=l=>e.departmentModel.depCode=l)},null,8,["addon-before","value"])]),_:1}),a(s,{label:"\u6392\u5E8F",name:"order"},{default:u(()=>[a(i,{value:e.departmentModel.order,"onUpdate:value":t[3]||(t[3]=l=>e.departmentModel.order=l)},null,8,["value"])]),_:1}),a(s,{label:"\u72B6\u6001",name:"status"},{default:u(()=>[a(R,{value:e.departmentModel.status,"onUpdate:value":t[4]||(t[4]=l=>e.departmentModel.status=l)},{default:u(()=>[a(I,{value:1},{default:u(()=>[Ae]),_:1}),a(I,{value:0},{default:u(()=>[ke]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","onConfirm"])])}var Pe=ce(be,[["render",Ie]]);export{Pe as default};
