var z=Object.defineProperty,P=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,j=(e,t)=>{for(var o in t||(t={}))V.call(t,o)&&M(e,o,t[o]);if(y)for(var o of y(t))G.call(t,o)&&M(e,o,t[o]);return e},h=(e,t)=>P(e,S(t));import{_ as H,a as J}from"./ModalDialog.eba3ff20.js";import{_ as K,a as Q}from"./TableBody.3b4c565d.js";import{d as W,t as X,b as B,e as Y,o as _,n as L,a as n,w as u,c as A,O as m,N as T,q as $,F as Z,a5 as x,M as ee,m as U,a_ as te,U as oe,aT as ae,bq as ne,aj as ue,bu as se,ak as le,ai as de,bv as re,bw as ie,bz as me,bA as pe}from"./vendor.1107f9f6.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{p as _e,_ as ce,j as fe}from"./index.59a0ec82.js";/* empty css               */import{u as Fe,a as Ee}from"./table.4d9e1a04.js";import{_ as O}from"./lodash.e8daa3f9.js";function ve(){return _e}const ge="dp_code_",be=W({name:"Department",setup(){const e=Fe(),t=Ee([{title:"\u90E8\u95E8\u540D\u79F0",key:"name",dataIndex:"name",align:"center"},{title:"\u90E8\u95E8\u7F16\u53F7",key:"depCode",dataIndex:"depCode",align:"center"},{title:"\u6392\u5E8F",key:"order",dataIndex:"order",align:"center"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",align:"center"},{title:"\u64CD\u4F5C",key:"actions",dataIndex:"actions",align:"center"}]),o=X({parentId:void 0,id:0,name:"",depCode:"",order:1,status:1}),k={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 10\u4E2A\u5B57\u7B26",trigger:"blur"}],depCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 30\u4E2A\u5B57\u7B26",trigger:"blur"}]},F=B(),c=B(),r=B(null),E=ve();function v(){E({url:fe}).then(({data:a=[]})=>(e.tableLoading.value=!1,e.dataList.length=0,e.dataList.push(...a),a))}function p(a,s){for(let d=0;d<a.length;d++){const i=a[d];if(i.id===s.id){if(!O.isEmpty(i.children)){U.error("\u5F53\u524D\u90E8\u95E8\u4E0B\u6709\u5B50\u90E8\u95E8\uFF0C\u4E0D\u80FD\u5220\u9664");return}a.splice(d,1);return}else O.isEmpty(i.children)||p(i.children,s)}}const g=a=>{ee.confirm({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u4FE1\u606F\uFF0C\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF1F",onOk(){p(e.dataList,a)}})};function b(){var a;c.value="\u6DFB\u52A0\u90E8\u95E8",o.parentId=void 0,o.id=0,o.status=1,o.depCode="",o.name="",o.order=1,(a=r.value)==null||a.toggle()}function C(){var a;(a=F.value)==null||a.validate().then(()=>{var s;(s=r.value)==null||s.close(),U.success("\u6A21\u62DF\u90E8\u95E8\u6DFB\u52A0/\u7F16\u8F91\u6210\u529F\uFF0C\u6570\u636E\u4E3A\uFF1A"+JSON.stringify(o))}).catch(s=>{console.log("error",s)})}function D(a){var s;c.value="\u7F16\u8F91\u90E8\u95E8",Object.keys(a).forEach(d=>{o[d]=a[d]}),o.parentId=a.parentId,(s=r.value)==null||s.toggle()}return Y(v),h(j({DP_CODE_FLAG:ge,formRef:F,dialogTitle:c,departmentModel:o,formRule:k},e),{tableColumns:t,onUpdateItem:D,onDataFormConfirm:C,onDeleteItem:g,onAddItem:b,modalDialog:r})}}),Ce={class:"main-container"},De=m(" \u7F16\u8F91 "),Be=m(" \u5220\u9664 "),Ae=m("\u6B63\u5E38"),ke=m("\u7981\u7528");function Ie(e,t,o,k,F,c){const r=H,E=K,v=te,p=oe,g=ae,b=ne,C=Q,D=pe,a=ue,s=se,d=le,i=de,I=re,R=ie,N=me,q=J;return _(),L("div",Ce,[n(E,{"show-filter":!1},{"top-right":u(()=>[n(r,{onAdd:e.onAddItem},null,8,["onAdd"])]),_:1}),n(C,null,{default:u(()=>[n(b,{loading:e.tableLoading,"data-source":e.dataList,columns:e.tableColumns,pagination:!1},{bodyCell:u(({column:l,record:f})=>[l.key==="status"?(_(),A(v,{key:0,color:f.status===1?"success":"error"},{default:u(()=>[m(T(f.status===1?"\u6B63\u5E38":"\u7981\u7528"),1)]),_:2},1032,["color"])):$("v-if",!0),l.key==="actions"?(_(),A(g,{key:1},{default:u(()=>[n(p,{type:"primary",size:"small",onClick:w=>e.onUpdateItem(f)},{default:u(()=>[De]),_:2},1032,["onClick"]),n(p,{danger:"",size:"small",onClick:w=>e.onDeleteItem(f)},{default:u(()=>[Be]),_:2},1032,["onClick"])]),_:2},1024)):$("v-if",!0)]),_:1},8,["loading","data-source","columns"])]),_:1}),n(q,{ref:"modalDialog",title:e.dialogTitle,onConfirm:e.onDataFormConfirm},{content:u(()=>[n(N,{ref:"formRef",model:e.departmentModel,labelCol:{span:4},rules:e.formRule},{default:u(()=>[n(s,{label:"\u4E0A\u7EA7\u90E8\u95E8",name:"parentId"},{default:u(()=>[n(a,{value:e.departmentModel.parentId,"onUpdate:value":t[0]||(t[0]=l=>e.departmentModel.parentId=l),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},{default:u(()=>[(_(!0),L(Z,null,x(e.dataList,l=>(_(),A(D,{key:l.id,value:l.id},{default:u(()=>[m(T(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(s,{label:"\u90E8\u95E8\u540D\u79F0",name:"name"},{default:u(()=>[n(d,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",value:e.departmentModel.name,"onUpdate:value":t[1]||(t[1]=l=>e.departmentModel.name=l)},null,8,["value"])]),_:1}),n(s,{label:"\u90E8\u95E8\u7F16\u53F7",name:"depCode"},{default:u(()=>[n(d,{"addon-before":e.DP_CODE_FLAG,placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u53F7",value:e.departmentModel.depCode,"onUpdate:value":t[2]||(t[2]=l=>e.departmentModel.depCode=l)},null,8,["addon-before","value"])]),_:1}),n(s,{label:"\u6392\u5E8F",name:"order"},{default:u(()=>[n(i,{value:e.departmentModel.order,"onUpdate:value":t[3]||(t[3]=l=>e.departmentModel.order=l)},null,8,["value"])]),_:1}),n(s,{label:"\u72B6\u6001",name:"status"},{default:u(()=>[n(R,{value:e.departmentModel.status,"onUpdate:value":t[4]||(t[4]=l=>e.departmentModel.status=l)},{default:u(()=>[n(I,{value:1},{default:u(()=>[Ae]),_:1}),n(I,{value:0},{default:u(()=>[ke]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","onConfirm"])])}var ze=ce(be,[["render",Ie]]);export{ze as default};
