var N=Object.defineProperty,S=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var M=(e,o,t)=>o in e?N(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,T=(e,o)=>{for(var t in o||(o={}))V.call(o,t)&&M(e,t,o[t]);if(K)for(var t of K(o))G.call(o,t)&&M(e,t,o[t]);return e},j=(e,o)=>S(e,z(o));import{_ as J,a as X}from"./ModalDialog.128f1c2f.js";import{_ as H,a as P}from"./TableBody.20044952.js";import{b as _,m as v,d as Q,as as w,e as W,o as m,q as x,a as d,w as i,F as L,Q as y,P as Y,t as h,c as D,a7 as Z,D as ee,M as oe,W as ae,aX as te,bw as ne,bF as ue,dX as le,s as se,aq as re,bE as de,bA as ie}from"./vendor.b898e633.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              */import{_ as ce,p as U,k as pe,m as me}from"./index.b1b6ffea.js";/* empty css               *//* empty css                */import{u as _e,a as fe,c as Fe}from"./table.23beaa86.js";const O="ROLE_",k=[{label:"\u89D2\u8272\u540D\u79F0",type:"input",key:"name",value:_(""),required:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",validator:function(){return this.value.value?!0:(v.error(this.placeholder),!1)}},{label:"\u89D2\u8272\u7F16\u53F7",key:"roleCode",value:_(""),type:"input",required:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7",validator:function(){return this.value.value?!0:(v.error(this.placeholder),!1)}},{label:"\u89D2\u8272\u63CF\u8FF0",key:"description",value:_(""),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"}];function $(e,o,t){const f=[];return e.forEach(c=>{const s={};s.key=c.menuUrl,s.title=c.menuName,o.push(s.key),c.children&&(t.push(s.key),s.children=$(c.children,o,t)),f.push(s)}),f}const ve=Q({name:"Role",setup(){const e=_(null),o=_(null),t=_e(),f=Fe("id"),c=_("\u6DFB\u52A0\u89D2\u8272"),s=w([]),C=fe([t.indexColumn,{title:"\u89D2\u8272\u540D\u79F0",key:"name",dataIndex:"name"},{title:"\u89D2\u8272\u7F16\u53F7",key:"roleCode",dataIndex:"roleCode"},{title:"\u89D2\u8272\u63CF\u8FF0",key:"description",dataIndex:"description"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime",dataIndex:"createTime"},{title:"\u89D2\u8272\u7F16\u53F7",key:"roleCode",dataIndex:"roleCode"},{title:"\u64CD\u4F5C",key:"actions"}],{align:"center"}),F=w([]),p=w([]);function g(){U({url:pe,data:{}}).then(t.handleSuccess).catch(console.log)}function b(){var n;c.value="\u6DFB\u52A0\u89D2\u8272",(n=e.value)==null||n.toggle()}function A(n){var u;c.value="\u7F16\u8F91\u89D2\u8272",(u=e.value)==null||u.toggle(),ee(()=>{k.forEach(l=>{const a=l.key,r=n[a];r&&(l.key==="roleCode"?l.value.value=r.replace(O,""):l.value.value=r)})})}function B(n){oe.confirm({title:"\u63D0\u793A",content:"\u662F\u5426\u8981\u5220\u9664\u6B64\u89D2\u8272\uFF1F",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",onOk:()=>{v.success("\u6A21\u62DF\u89D2\u8272\u5220\u9664\u6210\u529F\uFF0C\u53C2\u6570\u4E3A"+JSON.stringify(n))}})}function I(){var n;k.every(u=>u.validator?u.validator():!0)&&((n=e.value)==null||n.toggle(),v.success("\u6A21\u62DF\u83DC\u5355\u6DFB\u52A0\u6210\u529F\uFF0C\u53C2\u6570\u4E3A\uFF1A"+JSON.stringify(k.reduce((u,l)=>(u[l.key]=l.value.value,u),{}))))}function R(n){U({url:me,data:{roleId:n.id}}).then(u=>{var l;s.length=0,F.length=0,p.length=0,s.push(...$(u.data,F,p)),(l=o.value)==null||l.toggle()}).catch(console.log)}return W(g),j(T({ROLE_CODE_FLAG:O,modalDialogRef:e,menuModalDialogRef:o,rowKey:f,menuData:s,tableColumns:C,formItems:k,actionTitle:c,defaultCheckedKeys:F,defaultExpandedKeys:p},t),{onAddItem:b,onDataFormConfirm:I,onShowMenu:R,onDeleteItem:B,onUpdateItem:A})}}),ye={class:"main-container"},he=y("\u7F16\u8F91"),De=y("\u5220\u9664"),ke=y(" \u83DC\u5355\u6743\u9650 ");function Ce(e,o,t,f,c,s){const C=J,F=H,p=ae,g=te,b=ne,A=P,B=re,I=de,R=ie,n=ue,u=X,l=le;return m(),x("div",ye,[d(F,{"show-filter":!1},{"top-right":i(()=>[d(C,{onAdd:e.onAddItem},null,8,["onAdd"])]),_:1}),d(A,null,{default:i(()=>[d(b,{loading:e.tableLoading,"data-source":e.dataList,columns:e.tableColumns,pagination:!1,"row-key":e.rowKey},{bodyCell:i(({column:a,record:r,index:q})=>[a.key==="index"?(m(),x(L,{key:0},[y(Y(q+1),1)],2112)):h("v-if",!0),a.key==="actions"?(m(),D(g,{key:1},{default:i(()=>[d(p,{ghost:"",type:"primary",onClick:E=>e.onUpdateItem(r),size:"small"},{default:i(()=>[he]),_:2},1032,["onClick"]),d(p,{danger:"",size:"small",onClick:E=>e.onDeleteItem(r)},{default:i(()=>[De]),_:2},1032,["onClick"]),d(p,{ghost:"",type:"primary",size:"small",onClick:E=>e.onShowMenu(r)},{default:i(()=>[ke]),_:2},1032,["onClick"])]),_:2},1024)):h("v-if",!0)]),_:1},8,["loading","data-source","columns","row-key"])]),_:1}),d(u,{ref:"modalDialogRef",title:e.actionTitle,onConfirm:e.onDataFormConfirm},{content:i(()=>[d(n,null,{default:i(()=>[(m(!0),x(L,null,Z(e.formItems,a=>(m(),D(R,{class:se([a.required?"form-item__require":"form-item__no_require"]),label:a.label,key:a.key},{default:i(()=>[a.type==="input"?(m(),D(B,{key:0,"addon-before":a.key==="roleCode"?e.ROLE_CODE_FLAG:"",placeholder:a.placeholder,value:a.value.value,"onUpdate:value":r=>a.value.value=r},null,8,["addon-before","placeholder","value","onUpdate:value"])):h("v-if",!0),a.type==="textarea"?(m(),D(I,{key:1,value:a.value.value,"onUpdate:value":r=>a.value.value=r,placeholder:a.placeholder,"auto-size":{minRows:3,maxRows:5}},null,8,["value","onUpdate:value","placeholder"])):h("v-if",!0)]),_:2},1032,["class","label"]))),128))]),_:1})]),_:1},8,["title","onConfirm"]),d(u,{ref:"menuModalDialogRef",title:"\u7F16\u8F91\u83DC\u5355\u6743\u9650"},{content:i(()=>[d(l,{"tree-data":e.menuData,checkable:"",expandedKeys:e.defaultExpandedKeys,"onUpdate:expandedKeys":o[0]||(o[0]=a=>e.defaultExpandedKeys=a),checkedKeys:e.defaultCheckedKeys,"onUpdate:checkedKeys":o[1]||(o[1]=a=>e.defaultCheckedKeys=a)},null,8,["tree-data","expandedKeys","checkedKeys"])]),_:1},512)])}var je=ce(ve,[["render",Ce]]);export{je as default};
