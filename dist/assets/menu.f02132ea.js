var O=Object.defineProperty,S=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var B=(e,t,o)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,U=(e,t)=>{for(var o in t||(t={}))K.call(t,o)&&B(e,o,t[o]);if(x)for(var o of x(t))V.call(t,o)&&B(e,o,t[o]);return e},E=(e,t)=>S(e,L(t));import{_ as H,a as J}from"./ModalDialog.128f1c2f.js";import{_ as P,a as R}from"./TableBody.20044952.js";import{d as Q,b as s,m as y,e as W,o as n,q as D,a as p,w as i,F as j,Q as f,P as F,t as d,c as _,y as X,a7 as G,M as Y,b3 as Z,W as ee,aX as ae,bw as ue,bF as te,s as oe,g as le,aq as ne,an as se,bA as ie}from"./vendor.b898e633.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{_ as re,p as ce,j as de}from"./index.b1b6ffea.js";import{_ as _e}from"./IconSelector.3894920b.js";/* empty css               */import{u as pe,a as ve,c as fe}from"./table.23beaa86.js";import"./index.14569b16.js";import"./index.5aae49de.js";const me=Q({name:"Menu",setup(){const e=s("add"),t=pe(),o=s(null),g=s(null),w=fe("menuUrl"),A=ve([{title:"\u83DC\u5355\u540D\u79F0",key:"menuName",dataIndex:"menuName"},{title:"\u83DC\u5355\u5730\u5740",key:"menuUrl",dataIndex:"menuUrl"},{title:"\u83DC\u5355\u56FE\u6807",key:"icon"},{title:"\u662F\u5426\u7F13\u5B58",key:"cacheable",dataIndex:"cacheable"},{title:"\u662F\u5426\u9690\u85CF",key:"hidden",dataIndex:"hidden"},{title:"\u662F\u5426\u56FA\u5B9A\u6807\u9898\u680F",key:"affix",dataIndex:"affix"},{title:"\u64CD\u4F5C",key:"actions"}],{align:"center"}),v=[{label:"\u4E0A\u7EA7\u83DC\u5355",key:"parentPath",value:s(void 0),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u83DC\u5355",type:"tree-select",reset:function(){this.value.value=void 0}},{label:"\u83DC\u5355\u540D\u79F0",key:"menuName",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",value:s(""),validator:function(){return this.value.value?!0:(y.error(this.placeholder),!1)},reset:function(){this.value.value=""}},{label:"\u83DC\u5355\u5730\u5740",key:"menuUrl",required:!0,value:s(""),type:"input",disabled:s(!1),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u5730\u5740",validator:function(){return this.value.value?!0:(y.error(this.placeholder),!1)},reset:function(){this.value.value=""}},{label:"\u5916\u94FE\u5730\u5740",key:"redirect",type:"input",placeholder:"\u8BF7\u8F93\u5165\u5916\u94FE\u5730\u5740",value:s(""),reset:function(){this.value.value=""}},{label:"\u83DC\u5355\u56FE\u6807",key:"icon",type:"icon",value:s(""),reset:function(){this.value.value=""}},{label:"\u662F\u5426\u7F13\u5B58",key:"cacheable",type:"switch",value:s(!1),reset:function(){this.value.value=!1}},{label:"\u662F\u5426\u9690\u85CF",key:"hidden",type:"switch",value:s(!1),reset:function(){this.value.value=!1}},{label:"\u662F\u5426\u56FA\u5B9A",key:"affix",type:"switch",value:s(!1),reset:function(){this.value.value=!1}}];function k(){ce({url:de,data:{}}).then(t.handleSuccess).catch(console.log)}function m(){var r;e.value="add",v.forEach(l=>{l.reset&&l.reset()}),(r=o.value)==null||r.show()}function h(r){var l;e.value="edit",v.forEach(c=>{c.value.value=r[c.key]||null,c.key==="menuUrl"&&c.disabled&&(c.disabled.value=!0)}),(l=o.value)==null||l.show()}function b(){var r;e.value==="add"&&v.every(l=>l.validator?l.validator():!0)&&((r=o.value)==null||r.close(),y.success("\u6A21\u62DF\u521B\u5EFA\u83DC\u5355\u6210\u529F, \u53C2\u6570\u4E3A:"+JSON.stringify(v.reduce((l,c)=>(l[c.key]=c.value.value||"",l),{}))))}function C(r){Y.confirm({title:"\u63D0\u793A",content:"\u662F\u5426\u8981\u5220\u9664\u6B64\u6570\u636E\uFF1F",okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",onOk:()=>{y.success("\u6A21\u62DF\u5220\u9664\u6210\u529F\uFF0C\u53C2\u6570\u4E3A\uFF1A"+JSON.stringify(r))}})}return W(k),E(U({rowKey:w,actionModel:e,modalDialog:o,dataForm:g},t),{itemFormOptions:v,tableColumns:A,onAddItem:m,onDeleteItem:C,onUpdateItem:h,onConfirm:b})}}),he={class:"main-container"},ye=f(" \u7F16\u8F91 "),Fe=f("\u5220\u9664");function ke(e,t,o,g,w,A){const v=H,k=P,m=Z,h=ee,b=ae,C=ue,r=R,l=le,c=ne,I=_e,M=se,N=ie,$=te,T=J;return n(),D("div",he,[p(k,{"show-filter":!1},{"top-right":i(()=>[p(v,{onAdd:e.onAddItem},null,8,["onAdd"])]),_:1}),p(r,null,{default:i(()=>[p(C,{loading:e.tableLoading,"data-source":e.dataList,"row-key":e.rowKey,columns:e.tableColumns,pagination:!1},{bodyCell:i(({column:a,record:u,index:q})=>[a.key==="index"?(n(),D(j,{key:0},[f(F(q+1),1)],2112)):d("v-if",!0),a.key==="icon"?(n(),_(X(u.icon||"MenuOutlined"),{key:1,style:{"font-size":"18px"}})):d("v-if",!0),a.key==="cacheable"?(n(),_(m,{key:2,size:"small",color:u.cacheable?"success":"error"},{default:i(()=>[f(F(u.cacheable?"\u662F":"\u5426"),1)]),_:2},1032,["color"])):d("v-if",!0),a.key==="hidden"?(n(),_(m,{key:3,size:"small",color:u.hidden?"success":"error"},{default:i(()=>[f(F(u.hidden?"\u662F":"\u5426"),1)]),_:2},1032,["color"])):d("v-if",!0),a.key==="affix"?(n(),_(m,{key:4,size:"small",color:u.affix?"success":"error"},{default:i(()=>[f(F(u.affix?"\u662F":"\u5426"),1)]),_:2},1032,["color"])):d("v-if",!0),a.key==="actions"?(n(),_(b,{key:5},{default:i(()=>[p(h,{ghost:"",type:"primary",onClick:z=>e.onUpdateItem(u),size:"small"},{default:i(()=>[ye]),_:2},1032,["onClick"]),p(h,{danger:"",size:"small",onClick:z=>e.onDeleteItem(u)},{default:i(()=>[Fe]),_:2},1032,["onClick"])]),_:2},1024)):d("v-if",!0)]),_:1},8,["loading","data-source","row-key","columns"])]),_:1}),p(T,{ref:"modalDialog",title:e.actionModel==="add"?"\u6DFB\u52A0\u83DC\u5355":"\u7F16\u8F91\u83DC\u5355",onConfirm:e.onConfirm,"content-height":"50vh"},{content:i(()=>[p($,{wrapperCol:{span:18}},{default:i(()=>[(n(!0),D(j,null,G(e.itemFormOptions,a=>(n(),_(N,{class:oe([a.required?"form-item__require":"form-item__no_require"]),label:a.label,key:a.key},{default:i(()=>[a.type==="tree-select"?(n(),_(l,{key:0,value:a.value.value,"onUpdate:value":u=>a.value.value=u,"show-search":"",fieldNames:{label:"menuName",key:"menuUrl",value:"menuUrl"},style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:a.placeholder,"allow-clear":"","tree-data":e.dataList},null,8,["value","onUpdate:value","placeholder","tree-data"])):d("v-if",!0),a.type==="input"?(n(),_(c,{key:1,value:a.value.value,"onUpdate:value":u=>a.value.value=u,placeholder:a.placeholder},null,8,["value","onUpdate:value","placeholder"])):d("v-if",!0),a.type==="icon"?(n(),_(I,{key:2,value:a.value.value,"onUpdate:value":u=>a.value.value=u},null,8,["value","onUpdate:value"])):d("v-if",!0),a.type==="switch"?(n(),_(M,{key:3,checked:a.value.value,"onUpdate:checked":u=>a.value.value=u},null,8,["checked","onUpdate:checked"])):d("v-if",!0)]),_:2},1032,["class","label"]))),128))]),_:1})]),_:1},8,["title","onConfirm"])])}var Te=re(me,[["render",ke]]);export{Te as default};
